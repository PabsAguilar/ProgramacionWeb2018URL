apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: mongo-c
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: mongo-c
    spec:
      containers:
      - name: mongo-c
        image: mongo
        ports:
        - containerPort: 27017
          name: mongo
---
apiVersion: v1
kind: Service
metadata:
  name: mongo-c
spec:
  ports:
  - port: 27017
  selector:
    app: mongo-c
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: redis-c
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: redis-c
    spec:
      containers:
      - name: redis-c
        image: redis
        ports:
        - containerPort: 3679
          name: redis
---
apiVersion: v1
kind: Service
metadata:
  name: redis-c
spec:
  ports:
  - port: 3679
  selector:
    app: redis-c
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: backend-c
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: backend-c
    spec:
      containers:
       - env:
        - name: Mongo_URL
          value: mongodb://mongo-c:27017/store
        - name: REDIS_URL
          value: redis://redis-c
      - name: backend-c
        image: docker.io/pabsaguilar2806/backend:latest
        ports:
        - containerPort: 3000
          name: backend
---
apiVersion: v1
kind: Service
metadata:
  name: backend-c
spec:
  ports:
  - port: 3000
  selector:
    app: backend-c

---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: frontend-c
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: frontend-c
    spec:
      containers:
      - name: frontend-c
        image: docker.io/pabsaguilar2806/frontend:latest
        ports:
        - containerPort: 4200
          name: frontend
---
apiVersion: v1
kind: Service
metadata:
  name: frontend-c
spec:
  type: LoadBalancer
  ports:
  - port: 4200
  selector:
    app: frontend-c